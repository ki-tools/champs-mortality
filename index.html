<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Calculate mortality fractions and rates for CHAMPS sites.">
<title>Calculate mortality fractions and rates for CHAMPS sites • champsmortality</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Calculate mortality fractions and rates for CHAMPS sites">
<meta property="og:description" content="Calculate mortality fractions and rates for CHAMPS sites.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">champsmortality</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/getting-started.html">Getting Started</a>
    <a class="dropdown-item" href="articles/datasets.html">Datasets</a>
    <a class="dropdown-item" href="articles/analysis.html">Computing Adjusted Rates and Fractions</a>
    <a class="dropdown-item" href="articles/reports.html">Creating Reports</a>
    <a class="dropdown-item" href="articles/methodology.html">Methodology</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="champsmortality">champsmortality<a class="anchor" aria-label="anchor" href="#champsmortality"></a>
</h1></div>
<!-- badges: start -->
<p>The goal of champsmortality is to provide functions for calculating mortality fractions and rates at CHAMPS sites for various causes.</p>
<p>Below is a high-level walkthrough of some of the major pacakge functionality and workflow. Read the additional articles for more depth:</p>
<ul>
<li><a href="articles/getting-started.html">Getting Started</a></li>
<li><a href="articles/datasets.html">Datasets</a></li>
<li><a href="articles/analysis.html">Computing Adjusted Rates and Fractions</a></li>
<li><a href="articles/reports.html">Creating Reports</a></li>
<li><a href="articles/methodology.html">Methodology</a></li>
</ul>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of champsmortality with the following:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span> <span class="co"># one time only</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ki-tools/champs-mortality"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This package is most useful with real data obtainable from <a href="https://champshealth.org/data/" class="external-link">CHAMPS</a>. For the purposes of documentation and examples, the package ships with synthetic datasets. As such, keep in mind that the results of the examples in this documentation not meaningful.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ki-tools.github.io/champs-mortality/">champsmortality</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="data-setup">Data setup<a class="anchor" aria-label="anchor" href="#data-setup"></a>
</h3>
<p>The first time you use this package, you need to place the appropriate data files in a data directory that the package will pull from to perform the calculations. A function <code><a href="reference/create_dataset_directory.html">create_dataset_directory()</a></code> is provided to help get this set up.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/create_dataset_directory.html">create_dataset_directory</a></span><span class="op">(</span><span class="va">data_dir</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ The directory</span></span>
<span><span class="co">#&gt;   '/var/folders/7b/thg__1xx7w98wc4rs8t3djrw0000gn/T//RtmpLqJRct/file7b0142e76775' is ready</span></span>
<span><span class="co">#&gt;   for the appropriate data files to be placed in it. The following datasets should be placed</span></span>
<span><span class="co">#&gt;   in this directory:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 1. CHAMPS Analytics Dataset: This dataset is available as a downloadable file from LabKey and</span></span>
<span><span class="co">#&gt;    is continuously updated. It contains most of the CHAMPS variables that are needed for the</span></span>
<span><span class="co">#&gt;    analysis.</span></span>
<span><span class="co">#&gt; 2. Maternal Registry Forms table: This dataset is also available as a downloadable file from</span></span>
<span><span class="co">#&gt;    LabKey and contains information about maternal age and education.</span></span>
<span><span class="co">#&gt; 3. CHAMPS vocabulary: This dataset provides a lookup table for all CHAMPS codes, providing a</span></span>
<span><span class="co">#&gt;    corresponding 'name' and 'preferred name' for each. This file is accessible from the</span></span>
<span><span class="co">#&gt;    CHAMPS L2 dataset from dataverse.</span></span>
<span><span class="co">#&gt; 4. DSS: This dataset contains counts of cases from the demographic surveillance system (DSS)</span></span>
<span><span class="co">#&gt;    corresponding to each CHAMPS site and catchment area, only for DSS cases that are not in</span></span>
<span><span class="co">#&gt;    the CHAMPS data. These counts are broken down by age group, year, location of death,</span></span>
<span><span class="co">#&gt;    season of death, maternal education, sex of child, and verbal autopsy cause of death.</span></span>
<span><span class="co">#&gt; 5. Season definition: This dataset is a csv file containing rainy and dry season date ranges</span></span>
<span><span class="co">#&gt;    for each site, which will be used to classify the season in which each case occurs. A</span></span>
<span><span class="co">#&gt;    dataset with known season definitions,</span></span>
<span><span class="co">#&gt;    '/var/folders/7b/thg__1xx7w98wc4rs8t3djrw0000gn/T//RtmpLqJRct/file7b0142e76775/seasons.csv',</span></span>
<span><span class="co">#&gt;    has been provided. Please update that file if necessary.</span></span>
<span><span class="co">#&gt; 6. Catchment lookup: This dataset is a csv file containing mappings from catchment codes to</span></span>
<span><span class="co">#&gt;    catchment names, used to link the DSS data, which uses catchment names, to the CHAMPS</span></span>
<span><span class="co">#&gt;    analysis dataset, which uses catchment IDs. A dataset with known catchment lookups,</span></span>
<span><span class="co">#&gt;    '/var/folders/7b/thg__1xx7w98wc4rs8t3djrw0000gn/T//RtmpLqJRct/file7b0142e76775/catchment_lookup.csv',</span></span>
<span><span class="co">#&gt;    has been provided. Please update that file if necessary.</span></span>
<span><span class="co">#&gt; 7. Live births: This dataset is a csv file containing yearly live births by site and</span></span>
<span><span class="co">#&gt;    catchment from DSS. A dataset with known live birth statistics by site, catchment, and</span></span>
<span><span class="co">#&gt;    year,</span></span>
<span><span class="co">#&gt;    '/var/folders/7b/thg__1xx7w98wc4rs8t3djrw0000gn/T//RtmpLqJRct/file7b0142e76775/live_births.csv',</span></span>
<span><span class="co">#&gt;    has been provided. Please update that file if necessary.</span></span>
<span><span class="co">#&gt; 8. Live births: This dataset is a csv file containing yearly DHS all-cause mortality data by</span></span>
<span><span class="co">#&gt;    site and catchment from DSS. A dataset with known DHS statistics by site, catchment, year,</span></span>
<span><span class="co">#&gt;    and age,</span></span>
<span><span class="co">#&gt;    '/var/folders/7b/thg__1xx7w98wc4rs8t3djrw0000gn/T//RtmpLqJRct/file7b0142e76775/dhs.csv',</span></span>
<span><span class="co">#&gt;    has been provided. Please update that file if necessary.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; → Once the files are in place, edit the file</span></span>
<span><span class="co">#&gt;   /var/folders/7b/thg__1xx7w98wc4rs8t3djrw0000gn/T//RtmpLqJRct/file7b0142e76775/config.yaml</span></span>
<span><span class="co">#&gt;   to provide the file names corresponding to each of these datasets.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The config.yaml template looks like this:</span></span>
<span><span class="co">#&gt;     ┌──────────────────────────────────────────┐</span></span>
<span><span class="co">#&gt;     │  champs_analytics_dataset: ''            │</span></span>
<span><span class="co">#&gt;     │  maternal_registry_dataset: ''           │</span></span>
<span><span class="co">#&gt;     │  champs_vocabulary_dataset: ''           │</span></span>
<span><span class="co">#&gt;     │  dss_dataset: ''                         │</span></span>
<span><span class="co">#&gt;     │  season_lookup: seasons.csv              │</span></span>
<span><span class="co">#&gt;     │  catchment_lookup: catchment_lookup.csv  │</span></span>
<span><span class="co">#&gt;     │  live_births_dataset: live_births.csv    │</span></span>
<span><span class="co">#&gt;     │  dhs_dataset: dhs.csv                    │</span></span>
<span><span class="co">#&gt;     └──────────────────────────────────────────┘</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; So for example, if the CHAMPS Analytics Dataset you placed in this directory is named</span></span>
<span><span class="co">#&gt; 'Analytics_Dataset_2021-09-01.xlsx', you would edit the corresponding line in config.yaml as</span></span>
<span><span class="co">#&gt; follows:</span></span>
<span><span class="co">#&gt;     ┌─────────────────────────────────────────────────────────────────┐</span></span>
<span><span class="co">#&gt;     │  champs_analytics_dataset: 'Analytics_Dataset_2021-09-01.xlsx'  │</span></span>
<span><span class="co">#&gt;     └─────────────────────────────────────────────────────────────────┘</span></span></code></pre></div>
<p>This is something that only needs to be done once. Public data that comes with the package will be placed here, and additional private datasets will need to be added. More about the required datasets and expected formats can be found <a href="articles/datasets.html">in this article</a>.</p>
<p>For the purpose of these examples, we will change <code>data_dir</code> to point to a directory containing synthetic data. SKIP THIS STEP IF YOU ARE WORKING WITH REAL DATA.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"champsmortality"</span><span class="op">)</span>, <span class="st">"testdata"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="read-the-data">Read the data<a class="anchor" aria-label="anchor" href="#read-the-data"></a>
</h3>
<p>Once this is set up and the appropriate files are placed and mapped in the <code>config.yaml</code> file, you can read in the data with the following:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_and_validate_data.html">read_and_validate_data</a></span><span class="op">(</span><span class="va">data_dir</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ analytics_2022-05-24.csv</span></span>
<span><span class="co">#&gt; ✔ vocabulary_2022-05-24.csv</span></span>
<span><span class="co">#&gt; ✔ registry_2022-05-24.csv</span></span>
<span><span class="co">#&gt; ✔ dss_2022-05-24.csv</span></span>
<span><span class="co">#&gt; ✔ seasons.csv</span></span>
<span><span class="co">#&gt; ✔ catchment_lookup.csv</span></span>
<span><span class="co">#&gt; ✔ live_births.csv</span></span>
<span><span class="co">#&gt; ✔ dhs.csv</span></span></code></pre></div>
<p>This will read in the data files and ensure that all of the variables required to perform the calculations are present. If they are not, you will see an error message and will need to correct the error before being able to use the package.</p>
</div>
<div class="section level3">
<h3 id="process-the-data">Process the data<a class="anchor" aria-label="anchor" href="#process-the-data"></a>
</h3>
<p>A function, <code><a href="reference/process_data.html">process_data()</a></code> takes the data that has been read and joins it together to create a dataset ready analysis.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dd</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/process_data.html">process_data</a></span><span class="op">(</span><span class="va">d</span>, start_year <span class="op">=</span> <span class="fl">2017</span>, end_year <span class="op">=</span> <span class="fl">2020</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── processing analysis dataset ───────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; ✔ Calculated year of death from 'calc_dod'</span></span>
<span><span class="co">#&gt; ✔ Used CHAMPS vocabulary to transform 'age_group' in analysis dataset</span></span>
<span><span class="co">#&gt; ✔ Created a new variable 'age' that rolls up all neonates into one category to be compatible</span></span>
<span><span class="co">#&gt; with DSS data</span></span>
<span><span class="co">#&gt; ✔ Used CHAMPS vocabulary to transform 'calc_sex' in analysis dataset</span></span>
<span><span class="co">#&gt; ✔ Classified Verbal Autopsy Inter-VA Cause 1 codes as 'Infection', 'Trauma', 'Other', or NA</span></span>
<span><span class="co">#&gt; ✔ Removed 2879 records that occur before 2017 or after 2020 or have a missing date of death</span></span>
<span><span class="co">#&gt; ✔ Resolved catchment names from catchment IDs using catchment lookup table</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'catchment' in the analysis dataset are correct</span></span>
<span><span class="co">#&gt; ✔ Modified some analysis set variables to match what is found in DSS data:</span></span>
<span><span class="co">#&gt; • sex: set 'Indeterminate' and 'Unknown' to NA</span></span>
<span><span class="co">#&gt; • location: 'other' to NA</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'age' in the analysis dataset are correct</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'calc_sex' in the analysis dataset are correct</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'calc_location' in the analysis dataset are correct</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'va_cod_iva' in the analysis dataset are correct</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'site_name' in the seasons lookup are correct</span></span>
<span><span class="co">#&gt; ✔ Calculated season of death</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'season' in the seasons lookup are correct</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── processing maternal registry ──────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; ✔ Removed 244 records with missing 'champsid' from maternal registry dataset</span></span>
<span><span class="co">#&gt; ✔ The following 47 CHAMPS IDs have duplicate entries in the maternal registry dataset and</span></span>
<span><span class="co">#&gt; only the first record for each was kept: SEAA00272, SFAA00050, SHAA00046, SHAA00052,</span></span>
<span><span class="co">#&gt; SHAA00700, SHAA00882, SHAA00958, SHAA01135, SHAA01553, SHAA01898, SHAA01935, SHAA02086,</span></span>
<span><span class="co">#&gt; SHAA02123, SHCC00294, SIAA00004, SIAA00076, SIAA00104, SIAA00327, SIAA00428, SIAA00518,</span></span>
<span><span class="co">#&gt; SIAA00605, SIAA00851, SIAA00921, SIAA00935, SIAA01277, SIAA01735, SIAA01841, SIAA01891,</span></span>
<span><span class="co">#&gt; SOAA00370, SOAA00831, SOAA00833, SOAA01383, SOCC00033, SOCC00043, SOCC00091, SOCC00207,</span></span>
<span><span class="co">#&gt; SOCC00209, SOCC00225, SOCC00236, SOCC00249, SOCC00308, SSAA00025, SSAA00267, SSAA00476,</span></span>
<span><span class="co">#&gt; SSAA01016, SSAA02207, STAA01650</span></span>
<span><span class="co">#&gt; ✔ Used CHAMPS vocabulary to transform 'education' in maternal registry dataset</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'education' in the maternal registry dataset are correct</span></span>
<span><span class="co">#&gt; ✔ Joined analysis dataset and maternal registry</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── checking live births ──────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'site' in the live births data are correct</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'catchment' in the live births data are correct</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── checking DHS data ─────────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'site' in the DHS data are correct</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'catchment' in the DHS data are correct</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── checking DSS ──────────────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'site' in the DSS data are correct</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'catchment' in the DSS data are correct</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'age' in the DSS data are correct</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'level' in the DSS data are correct</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'level' in the DSS data are correct</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'level' in the DSS data are correct</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'level' in the DSS data are correct</span></span>
<span><span class="co">#&gt; ✔ Checked that values for 'va' in the DSS data are correct</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="valid-conditions">Valid conditions<a class="anchor" aria-label="anchor" href="#valid-conditions"></a>
</h3>
<p>Computations with this data typically have the goal of finding adjusted mortality fractions and rates for a given condition found in the causal chain. As you will see, these can be specified by either using the condition name or a <a href="https://www.sitepoint.com/learn-regex/" class="external-link">regular expression</a> indicating ICD10 codes that indicate the condition.</p>
<p>A convenience function that lists all available conditions in the data is provided, <code><a href="reference/valid_conditions.html">valid_conditions()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/valid_conditions.html">valid_conditions</a></span><span class="op">(</span><span class="va">dd</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 54 × 2</span></span>
<span><span class="co">#&gt;    condition                            `causal chain rank`</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;                                              &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1 Perinatal asphyxia/hypoxia                             1</span></span>
<span><span class="co">#&gt;  2 Neonatal preterm birth complications                   2</span></span>
<span><span class="co">#&gt;  3 Lower respiratory infections                           3</span></span>
<span><span class="co">#&gt;  4 Neonatal sepsis                                        4</span></span>
<span><span class="co">#&gt;  5 Sepsis                                                 5</span></span>
<span><span class="co">#&gt;  6 Congenital birth defects                               6</span></span>
<span><span class="co">#&gt;  7 Other neonatal disorders                               7</span></span>
<span><span class="co">#&gt;  8 Malnutrition                                           8</span></span>
<span><span class="co">#&gt;  9 Meningitis/Encephalitis                                9</span></span>
<span><span class="co">#&gt; 10 Malaria                                               10</span></span>
<span><span class="co">#&gt; # … with 44 more rows</span></span></code></pre></div>
<p>This searches the CHAMPS data and finds all unique condition values found anywhere in the causal chain. A ranking is also provided where a higher ranking indicates that the condition is found more frequently in the data than a condition with a lower ranking.</p>
</div>
<div class="section level3">
<h3 id="getting-rates-and-fractions">Getting Rates and Fractions<a class="anchor" aria-label="anchor" href="#getting-rates-and-fractions"></a>
</h3>
<p>The main function of this package computes factor-adjusted mortality rates and fractions for a specified set of sites and catchments. More details about the methodology can be found <a href="methodology.html">in this article</a>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_rates_and_fractions.html">get_rates_and_fractions</a></span><span class="op">(</span></span>
<span>  <span class="va">dd</span>,</span>
<span>  sites <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"S6"</span>, <span class="st">"S5"</span>, <span class="st">"S7"</span><span class="op">)</span>,</span>
<span>  catchments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C1"</span>, <span class="st">"C4"</span>, <span class="st">"C3"</span>, <span class="st">"C5"</span>, <span class="st">"C6"</span>, <span class="st">"C7"</span><span class="op">)</span>,</span>
<span>  causal_chain <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pval_cutoff <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  pct_na_cutoff <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  condition <span class="op">=</span> <span class="st">"Lower respiratory infections"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Processing site:  S6</span></span>
<span><span class="co">#&gt; ℹ The following catchments are not found in the data for site S6 and will be removed from the</span></span>
<span><span class="co">#&gt; calculations for this site: C4, C3, C5, C6, C7</span></span>
<span><span class="co">#&gt;   no adjustment variables</span></span>
<span><span class="co">#&gt; Processing site:  S5</span></span>
<span><span class="co">#&gt; ℹ The following catchments are not found in the data for site S5 and will be removed from the</span></span>
<span><span class="co">#&gt; calculations for this site: C1, C6, C7</span></span>
<span><span class="co">#&gt;   using adjustment variables: age, location</span></span>
<span><span class="co">#&gt; Processing site:  S7</span></span>
<span><span class="co">#&gt; ℹ The following catchments are not found in the data for site S7 and will be removed from the</span></span>
<span><span class="co">#&gt; calculations for this site: C1, C4, C3, C5</span></span>
<span><span class="co">#&gt;   using adjustment variable: location</span></span>
<span><span class="co">#&gt;   other significant factors not adjusted for: va</span></span></code></pre></div>
<p>The output of this function contains many pieces of information for each site including underlying statistics that went into the calculations, but the most interesting outputs are the rates and fractions.</p>
<p>For site S6, for example, we can extract the computed rates and fractions with the following:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graf</span><span class="op">$</span><span class="va">S6</span><span class="op">$</span><span class="va">rate</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 8</span></span>
<span><span class="co">#&gt;   site  catchments var    label                                 allcauseMR   est  lower upper</span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;                                      &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 S6    C1         cTU5MR Crude total under-5 mortality rate          591.     0 0.0140  13.5</span></span>
<span><span class="co">#&gt; 2 S6    C1         aTU5MR Adjusted total under-5 mortality rate       591.     0 0.0140  13.5</span></span>
<span><span class="va">graf</span><span class="op">$</span><span class="va">S6</span><span class="op">$</span><span class="va">frac</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 9</span></span>
<span><span class="co">#&gt;   site  catchments var   label                              decode condi…¹   est   lower upper</span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;                               &lt;int&gt;   &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 S6    C1         cCSMF Crude cause-specific mortality fr…     83       0     0 0.00236  2.28</span></span>
<span><span class="co">#&gt; 2 S6    C1         aCSMF Adjusted cause-specific mortality…     83       0     0 0.00236  2.28</span></span>
<span><span class="co">#&gt; # … with abbreviated variable name ¹​condition</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing champsmortality</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Ryan Hafen <br><small class="roles"> Maintainer, author </small>  </li>
<li>J Hathaway <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ki-tools/champs-mortality/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/ki-tools/champs-mortality/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/ki-tools/champs-mortality?branch=main" class="external-link"><img src="https://codecov.io/gh/ki-tools/champs-mortality/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Ryan Hafen, J Hathaway.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
